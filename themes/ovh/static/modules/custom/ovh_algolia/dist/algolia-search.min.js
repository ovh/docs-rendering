"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e,t,r,a,o){var s={variables:{savedRequest:!1},constants:{MAX_QUERIES_SAVE:5,sources:r.algolia.indexes,hitsTargetBase:"#hits-",baseIndex:r.algolia.indexes[0].indexes[0].index_name,page_name:r.commanders_act.tc_vars.page_name,algoliaSearch:a(r.algolia.application_id,r.algolia.search_api_key),resultPageUrl:r.algolia.results_page_url,localStorage:window.localStorage,hitsCssClasses:{emptyRoot:"ml-4",list:["ods-search-bar__autocomplete__list","pl-0","mb-0"]}},computed:{configureLang:void 0,search:void 0,hitsPerPage:void 0,searchBox:void 0,baseHitWrapper:"",autocompleteLinkItem:document.createElement("a")},elements:{searchBarFormInput:void 0},selectors:{searchbox:"#searchbox"},methods:{ready:function(){return null!==document.querySelector(s.selectors.searchbox)},initialize:function(){s.computed.baseHitWrapper=s.constants.hitsTargetBase+r.algolia.indexes[0].indexes[0].source,s.computed.search=o({indexName:s.constants.baseIndex,routing:!1,searchClient:_objectSpread(_objectSpread({},s.constants.algoliaSearch),{},{search:function(e){return e.every((function(e){return!e.params.query}))?Promise.resolve({results:e.map((function(){return{hits:[],nbHits:0,nbPages:0,page:0,processingTimeMS:0}}))}):s.constants.algoliaSearch.search(e)}})}),s.computed.configureLang=o.widgets.configure({disjunctiveFacetsRefinements:{search_api_language:[r.path.currentLanguage]}}),s.computed.hitsPerPage=o.widgets.configure({hitsPerPage:10}),s.computed.searchBox=o.widgets.searchBox({container:"#searchbox",showReset:!1,placeholder:t.t("Search products, docs â€¦"),cssClasses:{input:"ods-search-bar__form__input py-2 pr-3 pl-7",submit:"ods-search-bar__form__submit position-absolute p-2",submitIcon:"ods-search-bar__form__submit__icon",loadingIndicator:"ods-search-bar__loader"},templates:{submit:"",loadingIndicator:""}}),s.computed.search.addWidgets([s.computed.configureLang,s.computed.hitsPerPage,s.computed.searchBox,o.widgets.hits({container:s.computed.baseHitWrapper,templates:{item:function(e){var t=s.methods.getKeyword();return'<a\n                          data-tc-clic="local_search_auto_completion::'.concat(e.id,"::").concat(t,"::").concat(s.constants.page_name,'"\n                          href="').concat(e.url,'"\n                          class="ods-search-bar__autocomplete__list__item__link d-block px-4 py-2">\n                            ').concat(e._highlightResult.title.value,"\n                        </a>")}},cssClasses:s.constants.hitsCssClasses})]),s.methods.appendNewIndexes(),s.computed.search.start(),s.events.searchRender(),s.events.pressEnter(),s.events.clickSubmit(),s.events.clickAllResultsLink()},appendNewIndexes:function(){s.constants.sources.forEach((function(e){e.indexes.forEach((function(e){e.index_name!==s.constants.baseIndex&&s.computed.search.addWidgets([o.widgets.index({indexName:e.index_name}).addWidgets([o.widgets.hits({container:s.constants.hitsTargetBase+e.source,templates:{item:function(e){var t=s.methods.getKeyword();return'<a\n                                    data-tc-clic="local_search_auto_completion::'.concat(e.id,"::").concat(t,"::").concat(s.constants.page_name,'"\n                                    href="').concat(e.url,'"\n                                    class="ods-search-bar__autocomplete__list__item__link d-block px-4 py-2">\n                                      ').concat(e._highlightResult.title.value,"\n                                  </a>")}},cssClasses:s.constants.hitsCssClasses})])])}))}))},saveRequest:function(e){if(!s.variables.savedRequest){s.variables.savedRequest=!0;var t=JSON.parse(localStorage.getItem("ovhAlgoliaSearchQuery"))||[];t.length>=s.constants.MAX_QUERIES_SAVE&&t.shift(),t.push(e),localStorage.setItem("ovhAlgoliaSearchQuery",JSON.stringify(t))}},limitMaxResult:function(){s.constants.sources.forEach((function(e){var t=e.type,r=e.items_per_page_autocomplete,a=document.querySelector('[data-category-wrapper="'.concat(t,'"]')).querySelectorAll(".ais-Hits-item"),o=0;_toConsumableArray(a).forEach((function(e){(o+=1)>r?e.classList.add("d-none"):e.classList.remove("d-none")}))}))},getKeyword:function(){return document.querySelector(".ods-search-bar__form__input").value.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"-")},setTracking:function(){var e=s.methods.getKeyword();document.querySelector("[ods-search-bar-toggle]").setAttribute("data-tc-clic","local_search::use::".concat(s.constants.page_name)),document.querySelector(".ods-search-bar__autocomplete__all-results").setAttribute("data-tc-clic","local_search_auto_completion::all_results::".concat(e,"::").concat(s.constants.page_name))},multipleNoResultFix:function(){var e=0,t=0;_toConsumableArray(document.querySelectorAll("[data-category-wrapper]")).forEach((function(r){var a=r.querySelectorAll("[data-hits-wrapper]"),o=a.length,s=0;_toConsumableArray(a).forEach((function(a){e+=1;var n=a.querySelectorAll(".ais-Hits--empty").length;s+=n,n?(t+=1,a.classList.add("d-none")):a.classList.remove("d-none"),s===o?r.classList.add("d-none"):r.classList.remove("d-none")}))})),t===e?(document.querySelector("[ods-search-bar-no-result]").classList.remove("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.add("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.remove("d-block")):(document.querySelector("[ods-search-bar-no-result]").classList.add("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.remove("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.add("d-block"))}},events:{searchRender:function(){s.computed.search.on("render",(function(){s.methods.setTracking(),s.methods.multipleNoResultFix(),s.methods.limitMaxResult()}))},pressEnter:function(){document.querySelector(".ods-search-bar__form__input").addEventListener("keydown",(function(e){var t=e.target.value,r=s.constants.resultPageUrl+"?query="+t;13===e.keyCode&&(s.methods.saveRequest(t),t&&(window.location.href=r)),document.querySelector(".ods-search-bar__autocomplete__all-results").setAttribute("href",r)})),document.querySelector(".ods-search-bar__form__input").addEventListener("keyup",(function(e){var t=e.target.value,r=s.constants.resultPageUrl+"?query="+t;13===e.keyCode&&(s.methods.saveRequest(t),t&&(window.location.href=r)),document.querySelector(".ods-search-bar__autocomplete__all-results").setAttribute("href",r)}))},clickSubmit:function(){document.querySelector(".ods-search-bar__form__submit").addEventListener("click",(function(){var e=document.querySelector(".ods-search-bar__form__input").value,t=s.constants.resultPageUrl+"?query="+e;s.methods.saveRequest(e),e&&(window.location.href=t)}))},clickAllResultsLink:function(){return document.querySelector(".ods-search-bar__autocomplete__all-results").addEventListener("click",(function(){var e=document.querySelector(".ods-search-bar__form__input").value;s.methods.saveRequest(e)}))}}},n=window.location,c=n.protocol,l=n.host,i=n.pathname;"".concat(c,"//").concat(l+i)==r.algolia.results_page_url&&document.querySelector("#block-algoliasearchblock")?document.querySelector("#block-algoliasearchblock").remove():s.methods.ready()&&(s.attach=function(){s.methods.initialize()},e.behaviors.ovhAlgoliaSearch=s)}(Drupal,window.OVH,drupalSettings,window.algoliasearch,window.instantsearch);
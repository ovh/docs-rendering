var S=Object.defineProperty,x=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var h=(r,o,a)=>o in r?S(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,p=(r,o)=>{for(var a in o||(o={}))k.call(o,a)&&h(r,a,o[a]);if(_)for(var a of _(o))w.call(o,a)&&h(r,a,o[a]);return r},g=(r,o)=>x(r,R(o));import{d as L,i as E,e as b,g as A}from"./assets/configure.b9cc4a23.js";import{s as I}from"./assets/search-box.a1a3c9fa.js";import{h as y}from"./assets/hits.f6a3fcf5.js";import"./assets/find.0a6e189a.js";function P(){import("data:text/javascript,")}(function(r,o,a){const e={variables:{savedRequest:!1},constants:{MAX_QUERIES_SAVE:5,sources:a.algolia.indexes,hitsTargetBase:"#hits-",baseIndex:a.algolia.indexes[0].indexes[0].index_name,page_name:a.commanders_act.tc_vars.page_name,algoliaSearch:L(a.algolia.application_id,a.algolia.search_api_key),resultPageUrl:a.algolia.results_page_url,localStorage:window.localStorage,hitsCssClasses:{emptyRoot:"ml-4",list:["ods-search-bar__autocomplete__list","pl-0","mb-0"]}},computed:{configureLang:void 0,search:void 0,hitsPerPage:void 0,searchBox:void 0,baseHitWrapper:"",autocompleteLinkItem:document.createElement("a")},elements:{searchBarFormInput:void 0},selectors:{searchbox:"#searchbox"},methods:{ready:()=>document.querySelector(e.selectors.searchbox)!==null,initialize:()=>{e.computed.baseHitWrapper=e.constants.hitsTargetBase+a.algolia.indexes[0].indexes[0].source,e.computed.search=E({indexName:e.constants.baseIndex,routing:!1,searchClient:g(p({},e.constants.algoliaSearch),{search(t){return t.every(({params:s})=>!s.query)?Promise.resolve({results:t.map(()=>({hits:[],nbHits:0,nbPages:0,page:0,processingTimeMS:0}))}):e.constants.algoliaSearch.search(t)}})}),e.computed.configureLang=b({disjunctiveFacetsRefinements:{search_api_language:[a.path.currentLanguage]}}),e.computed.hitsPerPage=b({hitsPerPage:10}),e.computed.searchBox=I({container:"#searchbox",showReset:!1,placeholder:o.t("Search products, docs \u2026"),cssClasses:{input:"ods-search-bar__form__input py-2 pr-3 pl-7",submit:"ods-search-bar__form__submit position-absolute p-2",submitIcon:"ods-search-bar__form__submit__icon",loadingIndicator:"ods-search-bar__loader"},templates:{submit:"",loadingIndicator:""}}),e.computed.search.addWidgets([e.computed.configureLang,e.computed.hitsPerPage,e.computed.searchBox,y({container:e.computed.baseHitWrapper,templates:{item:t=>{const s=e.methods.getKeyword();return`<a
                          data-tc-clic="local_search_auto_completion::${t.id}::${s}::${e.constants.page_name}"
                          href="${t.url}"
                          class="ods-search-bar__autocomplete__list__item__link d-block px-4 py-2">
                            ${t._highlightResult.title.value}
                        </a>`}},cssClasses:e.constants.hitsCssClasses})]),e.methods.appendNewIndexes(),e.computed.search.start(),e.events.searchRender(),e.events.pressEnter(),e.events.clickSubmit(),e.events.clickAllResultsLink()},appendNewIndexes:()=>{e.constants.sources.forEach(t=>{t.indexes.forEach(s=>{s.index_name!==e.constants.baseIndex&&e.computed.search.addWidgets([A({indexName:s.index_name}).addWidgets([y({container:e.constants.hitsTargetBase+s.source,templates:{item:c=>{const l=e.methods.getKeyword();return`<a
                                    data-tc-clic="local_search_auto_completion::${c.id}::${l}::${e.constants.page_name}"
                                    href="${c.url}"
                                    class="ods-search-bar__autocomplete__list__item__link d-block px-4 py-2">
                                      ${c._highlightResult.title.value}
                                  </a>`}},cssClasses:e.constants.hitsCssClasses})])])})})},saveRequest:t=>{if(!e.variables.savedRequest){e.variables.savedRequest=!0;const s=JSON.parse(localStorage.getItem("ovhAlgoliaSearchQuery"))||[];s.length>=e.constants.MAX_QUERIES_SAVE&&s.shift(),s.push(t),localStorage.setItem("ovhAlgoliaSearchQuery",JSON.stringify(s))}},limitMaxResult:()=>{e.constants.sources.forEach(t=>{const s=t.type,c=t.items_per_page_autocomplete,l=document.querySelector(`[data-category-wrapper="${s}"]`).querySelectorAll(".ais-Hits-item");let n=0;[...l].forEach(i=>{n+=1,n>c?i.classList.add("d-none"):i.classList.remove("d-none")})})},getKeyword:()=>document.querySelector(".ods-search-bar__form__input").value.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"-"),setTracking:()=>{const t=e.methods.getKeyword();document.querySelector("[ods-search-bar-toggle]").setAttribute("data-tc-clic",`local_search::use::${e.constants.page_name}`),document.querySelector(".ods-search-bar__autocomplete__all-results").setAttribute("data-tc-clic",`local_search_auto_completion::all_results::${t}::${e.constants.page_name}`)},multipleNoResultFix:()=>{let t=0,s=0;[...document.querySelectorAll("[data-category-wrapper]")].forEach(l=>{const n=l.querySelectorAll("[data-hits-wrapper]"),i=n.length;let d=0;[...n].forEach(u=>{t+=1;const m=u.querySelectorAll(".ais-Hits--empty").length;d+=m,m?(s+=1,u.classList.add("d-none")):u.classList.remove("d-none"),d===i?l.classList.add("d-none"):l.classList.remove("d-none")})}),s===t?(document.querySelector("[ods-search-bar-no-result]").classList.remove("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.add("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.remove("d-block")):(document.querySelector("[ods-search-bar-no-result]").classList.add("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.remove("d-none"),document.querySelector(".ods-search-bar__autocomplete__all-results").classList.add("d-block"))}},events:{searchRender:()=>{e.computed.search.on("render",()=>{e.methods.setTracking(),e.methods.multipleNoResultFix(),e.methods.limitMaxResult()})},pressEnter:()=>{document.querySelector(".ods-search-bar__form__input").addEventListener("keydown",t=>{const s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},c=/[&<>"'/]/gi,l=t.target.value.replace(c,i=>s[i]),n=e.constants.resultPageUrl+"?query="+l;t.keyCode===13&&(e.methods.saveRequest(l),l&&(window.location.href=n)),document.querySelector(".ods-search-bar__autocomplete__all-results").setAttribute("href",n)}),document.querySelector(".ods-search-bar__form__input").addEventListener("keyup",t=>{const s=t.target.value,c=e.constants.resultPageUrl+"?query="+s;t.keyCode===13&&(e.methods.saveRequest(s),s&&(window.location.href=c)),document.querySelector(".ods-search-bar__autocomplete__all-results").setAttribute("href",c)})},clickSubmit:()=>{document.querySelector(".ods-search-bar__form__submit").addEventListener("click",()=>{const t=document.querySelector(".ods-search-bar__form__input").value,s=e.constants.resultPageUrl+"?query="+t;e.methods.saveRequest(t),t&&(window.location.href=s)})},clickAllResultsLink:()=>document.querySelector(".ods-search-bar__autocomplete__all-results").addEventListener("click",()=>{const t=document.querySelector(".ods-search-bar__form__input").value;e.methods.saveRequest(t)})}},{protocol:f,host:v,pathname:q}=window.location;`${f}//${v+q}`==a.algolia.results_page_url&&document.querySelector("#block-algoliasearchblock")?document.querySelector("#block-algoliasearchblock").remove():e.methods.ready()&&(e.attach=()=>{e.methods.initialize()},r.behaviors.ovhAlgoliaSearch=e)})(Drupal,OVH,drupalSettings);export{P as __vite_legacy_guard};

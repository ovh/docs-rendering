function c(){import("data:text/javascript,")}((i,r,o)=>{const e={variables:{navbarIsOpened:!1,loginPanelIsOpened:!1,searchBarIsOpened:!1,totalNotifs:0},constants:{switchDesktopDisplay:1120,buttonTogglerTextClose:r.t("Close menu"),loginTogglerTextClose:r.t("Close login menu"),searchBarOpenClass:"ods-search-bar--open",customerAPIURL:o.ovh.me_api_url,ticketsAPIURL:`${o.ovh.tickets_api_url}?status=open`,pendingOrdersAPIURL:`${o.ovh.me_order_api_url}/*/status?$aggreg=1&value:in=delivering,checking,documentsRequested`,getLastClickOnMenuStorage:sessionStorage.getItem("lastClickOnMenu")},elements:{main:document.querySelector("[data-header]"),topHeaderContainer:document.querySelector("[data-top-menu-container]"),topHeaderList:document.querySelector("[data-top-menu-list]"),topHeaderSubcategoryLinks:document.querySelectorAll("[data-top-menu-link-has-subcat], [data-language-switcher-btn]"),headerTogglerButton:document.querySelector("[data-header-toggler-button]"),headerTogglerButtonTextTag:document.querySelector("[data-header-button-text]"),headerTogglerButtonText:document.querySelector("[data-header-button-text]").textContent,headerUserNicTag:document.querySelector("[data-header-user-nic]"),headerUserNotif:document.querySelector("[data-header-user-notif]"),headerUserNotifAmount:document.querySelector("[data-header-user-notif-amount]"),headerUserNotifList:document.querySelector("[data-header-user-notif-list]"),headerUserNotifOrders:document.querySelector("[data-header-user-notif-orders]"),headerUserNotifOrdersText:document.querySelector("[data-header-user-notif-orders]")?document.querySelector("[data-header-user-notif-orders]").textContent:null,headerUserNotifTickets:document.querySelector("[data-header-user-notif-tickets]"),headerUserNotifTicketsText:document.querySelector("[data-header-user-notif-tickets]")?document.querySelector("[data-header-user-notif-tickets]").textContent:null,loginTogglerButton:document.querySelector("[data-login-toggler-button]"),loginTogglerButtonTextTag:document.querySelector("[data-login-button-text]"),loginMenuWrapper:document.querySelector("[data-login-menu-wrapper]"),searchBarTogglerButton:document.querySelector("[ods-search-bar-toggle]"),searchBarCloseButton:document.querySelector("[data-search-bar-close]"),navbar:document.querySelector("[data-navbar]"),overlay:document.querySelector("[data-header-overlay]"),searchOverlay:document.querySelector("[data-header-search-overlay]"),overlays:document.querySelectorAll("[data-header-overlay], [data-header-search-overlay]"),navbarItemsLvl1:document.querySelectorAll("[data-navbar-item-n1]"),navbarSubcategoryLinks:document.querySelectorAll("[data-link-has-subcat]"),headerBackLinks:document.querySelectorAll("[data-back-link]"),headerLinks:document.querySelector("[data-navbar]")?document.querySelector("[data-navbar]").querySelectorAll(".ods-navbar-link"):[],topHeaderLocalAnchors:[],loginTogglerButtonText:"",headerSearchBar:""},methods:{initialize:()=>{e.elements.navbar&&(e.elements.topHeaderLocalAnchors=e.elements.navbar.querySelectorAll('a[href^="#"]')),e.elements.loginTogglerButton&&(e.elements.loginTogglerButtonText=e.elements.loginTogglerButtonTextTag.textContent),e.elements.headerSearchBar=e.elements.main.querySelector("[ods-search-bar]"),e.events.clickTogglerButton(),e.events.clickOverlay(),e.events.focusSubcategoryLink(),e.elements.navbar&&(e.events.windowSizeListener(),e.events.clickLocalAnchor(),e.events.clickBackLink(),e.events.clickLink(),e.events.focusSubcategoryLinkLvl2(),e.events.clickSubcategoryLink()),e.elements.searchBarTogglerButton&&(e.events.clickSearchBarToggler(),e.events.closeSearchButton()),e.elements.loginTogglerButton&&e.events.clickLoginButton(),e.elements.navbarSubcategoryLinks.length&&e.events.focusNavbarMenu(),window.innerWidth<e.constants.switchDesktopDisplay&&e.elements.topHeaderList&&e.elements.navbar&&(e.elements.navbar.appendChild(e.elements.topHeaderList),e.elements.topHeaderList.classList.remove("d-none")),e.elements.navbar&&e.methods.highlightCurrentPageOnMenu()},navbarDisplay:()=>{e.variables.navbarIsOpened?(window.innerWidth<e.constants.switchDesktopDisplay&&document.querySelector("body").classList.add("no-scroll"),e.elements.navbar.classList.add("active"),e.elements.overlay.classList.remove("inactive"),e.elements.headerTogglerButton.classList.add("active"),e.elements.headerTogglerButtonTextTag.textContent=e.constants.buttonTogglerTextClose):(document.querySelector("body").classList.remove("no-scroll"),e.elements.navbar.classList.remove("active"),e.elements.overlay.classList.add("inactive"),e.elements.headerTogglerButton.classList.remove("active"),e.elements.headerTogglerButtonTextTag.textContent=e.elements.headerTogglerButtonText,[...e.elements.navbarSubcategoryLinks].forEach(t=>{t.nextElementSibling&&t.nextElementSibling.classList.remove("active")}))},loginPanelDisplay:()=>{e.variables.loginPanelIsOpened?(e.elements.loginMenuWrapper.classList.add("active"),e.elements.overlay.classList.remove("inactive"),e.elements.loginTogglerButtonTextTag.textContent=e.constants.loginTogglerTextClose):(e.elements.loginMenuWrapper.classList.remove("active"),e.elements.overlay.classList.add("inactive"),e.elements.loginTogglerButtonTextTag.textContent=e.elements.loginTogglerButtonText)},searchBarDisplay:()=>{e.variables.searchBarIsOpened?(window.innerWidth<e.constants.switchDesktopDisplay&&(e.elements.searchBarTogglerButton.classList.add("d-none"),e.elements.searchBarTogglerButton.classList.remove("d-flex")),e.elements.searchOverlay.classList.remove("inactive"),e.elements.headerSearchBar.classList.add(e.constants.searchBarOpenClass),e.elements.headerSearchBar.querySelector("input").focus()):(window.innerWidth<e.constants.switchDesktopDisplay&&(e.elements.searchBarTogglerButton.classList.add("d-flex"),e.elements.searchBarTogglerButton.classList.remove("d-none")),e.elements.searchOverlay.classList.add("inactive"),e.elements.headerSearchBar.classList.remove(e.constants.searchBarOpenClass))},menuSubcategoryDisplay:t=>{if(window.innerWidth<e.constants.switchDesktopDisplay){t.nextElementSibling.classList.add("active"),e.elements.navbar.classList.add("no-scroll");const s=t.closest("[data-menu-scroll-lock]");s&&(s.scroll({top:0,behavior:"smooth"}),s.classList.add("no-scroll"))}else{if(t.classList.contains("ods-navbar-link--n1")&&t.nextElementSibling.querySelector("[data-menu-sublist]")){const s=t.nextElementSibling.querySelectorAll("[data-link-has-subcat]"),a=t.nextElementSibling.querySelectorAll("[data-menu-sublist]");[...s].forEach(n=>{n.classList.remove("active")}),[...a].forEach(n=>{n.classList.remove("active")}),s[0].classList.add("active"),a[0].classList.add("active"),t.nextElementSibling.style.minHeight=`${a[0].offsetHeight}px`}if(t.nextElementSibling.classList.contains("ods-navbar__list--n3")){const s=t.closest("[data-menu-sublist]").querySelectorAll("[data-link-has-subcat]"),a=t.closest("[data-menu-sublist]").querySelectorAll(".ods-navbar__list--n3");s.length&&[...s].forEach(n=>{n.classList.remove("active")}),a.length&&[...a].forEach(n=>{n.classList.remove("active")}),t.classList.add("active"),t.nextElementSibling.classList.add("active"),t.closest(".ods-navbar__list--n2").style.minHeight=`${t.nextElementSibling.offsetHeight}px`,t.nextElementSibling.style.minHeight=`${t.closest(".ods-navbar__list--n2").offsetHeight}px`}}},showOverlayDesktop:()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.elements.overlay.classList.remove("inactive")},hideOverlayDesktop:()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.elements.overlay.classList.add("inactive")},getLoggedInUser:()=>new Promise((t,s)=>{fetch(e.constants.customerAPIURL).then(a=>t(a.json())).catch(a=>s(a))}),getPendingOrders:()=>{const t=new Headers;t.append("X-Ovh-ApiVersion","beta");const s={method:"GET",headers:t};return new Promise((a,n)=>{fetch(e.constants.pendingOrdersAPIURL,s).then(l=>a(l.json())).catch(l=>n(l))})},getPendingTickets:()=>new Promise((t,s)=>{fetch(e.constants.ticketsAPIURL).then(a=>t(a.json())).catch(a=>s(a))}),setSessionStorageLoggedInUser:(t,s,a)=>{let n="1";if(sessionStorage.getItem("user")!==t&&(sessionStorage.setItem("lastCheck",0),sessionStorage.setItem("pendingOrders",null),sessionStorage.setItem("pendingTickets",null)),sessionStorage.setItem("user",t),sessionStorage.setItem("user_code",s),sessionStorage.setItem("legalform",a),sessionStorage.getItem("legalform")!==null)switch(sessionStorage.getItem("legalform")){case"individual":n="1";break;case"association":n="2";break;case"corporation":n="3";break;case"other":n="4";break}typeof tc_vars!="undefined"&&(tc_vars.user_code=s,tc_vars.user_code.length&&(tag.identifiedVisitor.unset(),tag.identifiedVisitor.set({id:tc_vars.user_code,category:n})))},displayUserNic:t=>{e.elements.headerUserNicTag.textContent=`(${t})`,e.elements.headerUserNicTag.classList.remove("d-none")},displayNotifications:(t,s)=>{switch(s){case"orders":parseInt(t,10)>0?(e.elements.headerUserNotifOrders.textContent=r.formatPlural(parseInt(t,10),"1 pending order","@count pending orders"),e.variables.totalNotifs+=parseInt(t,10)):e.elements.headerUserNotifOrders.textContent=e.elements.headerUserNotifOrdersText;break;case"tickets":parseInt(t,10)>0?(e.elements.headerUserNotifTickets.textContent=r.formatPlural(parseInt(t,10),"1 pending ticket","@count pending tickets"),e.variables.totalNotifs+=parseInt(t,10)):e.elements.headerUserNotifTickets.textContent=e.elements.headerUserNotifTicketsText;break}e.variables.totalNotifs>0&&(e.elements.headerUserNotifAmount.classList.remove("d-none"),e.elements.headerUserNotifAmount.classList.add("d-flex"),e.elements.headerUserNotifAmount.textContent=e.variables.totalNotifs)},displayUserInfo:()=>{e.methods.getLoggedInUser().then(t=>{const{nichandle:s,customerCode:a,legalForm:n}=t;e.methods.setSessionStorageLoggedInUser(s,a,n),s&&s!=="undefined"&&e.methods.displayUserNic(s)}).then(()=>{e.elements.headerUserNicTag&&(e.elements.headerUserNotif.classList.remove("d-none"),e.elements.headerUserNotif.classList.add("d-lg-flex"),e.methods.getPendingOrders().then(t=>{sessionStorage.setItem("pendingOrders",t.length),t.length&&e.methods.displayNotifications(t.length,"orders")}),e.methods.getPendingTickets().then(t=>{sessionStorage.setItem("pendingTickets",t.length),t.length&&e.methods.displayNotifications(t.length,"tickets")}))})},getItemToHighlight:t=>t.closest("[data-navbar-item-n1]")?t.closest("[data-navbar-item-n1]").querySelector(".ods-navbar-link--n1"):null,getCurrentUrl:()=>{const t=new URL(window.location.href);return t.origin+t.pathname},getLink:()=>e.constants.getLastClickOnMenuStorage?e.elements.navbar.querySelector(`[data-navi-id="${e.constants.getLastClickOnMenuStorage}"]`):e.elements.navbar.querySelector(`[href="${e.methods.getCurrentUrl()}"]`),highlightCurrentPageOnMenu:()=>{const t=e.methods.getLink();sessionStorage.removeItem("lastClickOnMenu");const s=t?e.methods.getItemToHighlight(t):null;s&&s.classList.add("ods-navbar-link--active")}},events:{clickTogglerButton:()=>{e.elements.headerTogglerButton.addEventListener("click",()=>{e.elements.loginTogglerButton&&(e.variables.loginPanelIsOpened=!1,e.methods.loginPanelDisplay()),e.elements.headerSearchBar&&(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay()),e.variables.navbarIsOpened=!e.variables.navbarIsOpened,e.methods.navbarDisplay()})},closeSearchButton:()=>{e.elements.searchBarCloseButton.addEventListener("click",()=>{const t=document.querySelector(".ais-SearchBox-input");t.value.length?t.value="":(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay())})},clickLoginButton:()=>{e.elements.loginTogglerButton.addEventListener("click",()=>{e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.headerSearchBar&&(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay()),e.variables.loginPanelIsOpened=!e.variables.loginPanelIsOpened,e.methods.loginPanelDisplay()})},clickSearchBarToggler:()=>{e.elements.searchBarTogglerButton.addEventListener("click",()=>{e.variables.searchBarIsOpened=!0,e.methods.searchBarDisplay(),e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.loginTogglerButton&&(e.variables.loginPanelIsOpened=!1,e.methods.loginPanelDisplay())})},clickOverlay:()=>{[...e.elements.overlays].forEach(t=>{t.addEventListener("click",()=>{t.classList.add("inactive"),e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.loginTogglerButton&&(e.variables.loginPanelIsOpened=!1,e.methods.loginPanelDisplay()),e.elements.searchBarTogglerButton&&(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay())})})},clickSubcategoryLink:()=>{[...e.elements.navbarSubcategoryLinks,...e.elements.topHeaderSubcategoryLinks].forEach(t=>{t.addEventListener("click",s=>{e.methods.menuSubcategoryDisplay(t),window.innerWidth<e.constants.switchDesktopDisplay&&s.preventDefault()})})},focusSubcategoryLink:()=>{[...e.elements.topHeaderSubcategoryLinks,...e.elements.navbarSubcategoryLinks].forEach(t=>{t.closest("li").addEventListener("focusin",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&t.setAttribute("aria-expanded",!0)}),t.closest("li").addEventListener("focusout",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&t.setAttribute("aria-expanded",!1)})})},focusNavbarMenu:()=>{[...e.elements.navbarItemsLvl1].forEach(t=>{t.addEventListener("mouseenter",e.methods.showOverlayDesktop),t.addEventListener("focusin",e.methods.showOverlayDesktop),t.addEventListener("mouseleave",e.methods.hideOverlayDesktop),t.addEventListener("focusout",e.methods.hideOverlayDesktop)}),e.elements.headerSearchBar&&e.elements.headerSearchBar.addEventListener("focusout",t=>{const s=document.querySelector(".ods-search-bar__form__input");t.target.classList.contains("ods-search-bar__form__reset")&&!s.value&&(e.elements.searchOverlay.classList.add("inactive"),e.elements.headerSearchBar.classList.remove(e.constants.searchBarOpenClass))})},focusSubcategoryLinkLvl2:()=>{[...e.elements.navbarSubcategoryLinks].forEach(t=>{t.addEventListener("mouseenter",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.methods.menuSubcategoryDisplay(t)}),t.addEventListener("focusin",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.methods.menuSubcategoryDisplay(t)})})},clickBackLink:()=>{[...e.elements.headerBackLinks].forEach(t=>{t.addEventListener("click",()=>{window.innerWidth<e.constants.switchDesktopDisplay&&(t.closest("[data-menu-scroll-lock]").classList.remove("no-scroll"),t.parentNode.closest("[data-menu-sublist]")?t.parentNode.closest("[data-menu-sublist]").classList.remove("active"):t.parentNode.hasAttribute(["data-language-switcher-content"])&&t.parentNode.classList.remove("active"),t.closest("[data-menu-sublist]")&&t.closest("[data-menu-sublist]").classList.contains("ods-navbar__list--n2")&&e.elements.navbar.classList.remove("no-scroll"))})})},clickLink:()=>{[...e.elements.headerLinks].forEach(t=>{t.addEventListener("click",()=>{const s=t.getAttribute("data-navi-id");sessionStorage.setItem("lastClickOnMenu",s)})})},clickLocalAnchor:()=>{[...e.elements.topHeaderLocalAnchors].forEach(t=>{t.addEventListener("click",s=>{const a=t.getAttribute("href");document.querySelector(a)&&document.querySelector(a).scrollIntoView({behavior:"smooth"}),a==="#callback"&&document.querySelector('[data-expand-section="true"]').querySelector(".oui-cta").click(),s.preventDefault()})})},windowSizeListener:()=>{window.addEventListener("resize",()=>{window.innerWidth<e.constants.switchDesktopDisplay?e.elements.topHeaderList&&(e.elements.navbar.appendChild(e.elements.topHeaderList),e.elements.topHeaderList.classList.remove("d-none")):(e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.topHeaderList&&e.elements.topHeaderList.parentNode!==e.elements.topHeaderContainer&&e.elements.topHeaderContainer.appendChild(e.elements.topHeaderList))})}}};e.attach=()=>{e.methods.initialize()},i.behaviors.header=e})(Drupal,window.OVH,drupalSettings);export{c as __vite_legacy_guard};
